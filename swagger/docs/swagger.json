{
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "schemes": [
        "https",
        "http"
    ],
    "swagger": "2.0",
    "info": {
        "description": "lockd exposes exclusive lease management, atomic JSON checkpoints, and resilient work queues over HTTPS.",
        "title": "lockd API",
        "contact": {
            "name": "Michel Blomgren",
            "url": "https://pkt.systems",
            "email": "sa6mwa@gmail.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/license/mit/"
        },
        "version": "0.0"
    },
    "basePath": "/v1",
    "paths": {
        "/healthz": {
            "get": {
                "produces": [
                    "text/plain"
                ],
                "tags": [
                    "system"
                ],
                "summary": "Liveness probe",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/readyz": {
            "get": {
                "produces": [
                    "text/plain"
                ],
                "tags": [
                    "system"
                ],
                "summary": "Readiness probe",
                "responses": {
                    "200": {
                        "description": "Ready",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/v1/acquire": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Acquire or wait for an exclusive lease on a key. When block_seconds \u003e 0 the request will long-poll until a lease becomes available or the timeout elapses. Set if_not_exists=true to enforce create-only semantics and fail with already_exists when the key already exists. Returns a compact xid-based `lease_id` and `txn_id` (20-char lowercase base32, e.g. `c5v9d0sl70b3m3q8ndg0`) that must be echoed on write operations. Namespaces starting with `.` are reserved (e.g. `.txns`) and will be rejected.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Acquire an exclusive lease",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the request body omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Key to acquire when the request body omits it",
                        "name": "key",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Existing transaction identifier (xid) to join a multi-key transaction",
                        "name": "X-Txn-ID",
                        "in": "header"
                    },
                    {
                        "description": "Lease acquisition parameters",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.AcquireRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.AcquireResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/attachment": {
            "get": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Streams a single attachment (GET) or stages its deletion (DELETE).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/octet-stream"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Retrieve or delete a state attachment",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease key",
                        "name": "key",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Attachment name",
                        "name": "name",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Attachment id",
                        "name": "id",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Set to true to read without a lease (GET)",
                        "name": "public",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease identifier (required unless public=1)",
                        "name": "X-Lease-ID",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Transaction identifier (required for lease operations)",
                        "name": "X-Txn-ID",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Optional fencing token proof",
                        "name": "X-Fencing-Token",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Attachment payload",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Streams a single attachment (GET) or stages its deletion (DELETE).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/octet-stream"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Retrieve or delete a state attachment",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease key",
                        "name": "key",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Attachment name",
                        "name": "name",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Attachment id",
                        "name": "id",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Set to true to read without a lease (GET)",
                        "name": "public",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease identifier (required unless public=1)",
                        "name": "X-Lease-ID",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Transaction identifier (required for lease operations)",
                        "name": "X-Txn-ID",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Optional fencing token proof",
                        "name": "X-Fencing-Token",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Attachment payload",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/attachments": {
            "get": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Upload, list, or delete attachments for a key depending on the HTTP method.",
                "consumes": [
                    "application/octet-stream"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Manage state attachments",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease key",
                        "name": "key",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Attachment name (upload/delete)",
                        "name": "name",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Attachment id (delete)",
                        "name": "id",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Set to true to read without a lease (list)",
                        "name": "public",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Attachment content type (upload)",
                        "name": "content_type",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "format": "int64",
                        "description": "Maximum attachment size (0 = unlimited)",
                        "name": "max_bytes",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Do not overwrite existing attachments (upload)",
                        "name": "prevent_overwrite",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease identifier (required unless public=1)",
                        "name": "X-Lease-ID",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Transaction identifier (required for lease operations)",
                        "name": "X-Txn-ID",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Optional fencing token proof",
                        "name": "X-Fencing-Token",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.AttachmentListResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Upload, list, or delete attachments for a key depending on the HTTP method.",
                "consumes": [
                    "application/octet-stream"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Manage state attachments",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease key",
                        "name": "key",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Attachment name (upload/delete)",
                        "name": "name",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Attachment id (delete)",
                        "name": "id",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Set to true to read without a lease (list)",
                        "name": "public",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Attachment content type (upload)",
                        "name": "content_type",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "format": "int64",
                        "description": "Maximum attachment size (0 = unlimited)",
                        "name": "max_bytes",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Do not overwrite existing attachments (upload)",
                        "name": "prevent_overwrite",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease identifier (required unless public=1)",
                        "name": "X-Lease-ID",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Transaction identifier (required for lease operations)",
                        "name": "X-Txn-ID",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Optional fencing token proof",
                        "name": "X-Fencing-Token",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.AttachmentListResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Upload, list, or delete attachments for a key depending on the HTTP method.",
                "consumes": [
                    "application/octet-stream"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Manage state attachments",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease key",
                        "name": "key",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Attachment name (upload/delete)",
                        "name": "name",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Attachment id (delete)",
                        "name": "id",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Set to true to read without a lease (list)",
                        "name": "public",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Attachment content type (upload)",
                        "name": "content_type",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "format": "int64",
                        "description": "Maximum attachment size (0 = unlimited)",
                        "name": "max_bytes",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Do not overwrite existing attachments (upload)",
                        "name": "prevent_overwrite",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease identifier (required unless public=1)",
                        "name": "X-Lease-ID",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Transaction identifier (required for lease operations)",
                        "name": "X-Txn-ID",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Optional fencing token proof",
                        "name": "X-Fencing-Token",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.AttachmentListResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/describe": {
            "get": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Returns lease and state metadata without streaming the state payload.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Inspect metadata for a key",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease key",
                        "name": "key",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.DescribeResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/get": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Streams the currently committed JSON state for the key owned by the caller's lease (or, when public=1, the latest published snapshot). Returns 204 when no state is present.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Read the JSON checkpoint for a key",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease key",
                        "name": "key",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "boolean",
                        "description": "Set to true to read without a lease (served from published data)",
                        "name": "public",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease identifier (required unless public=1)",
                        "name": "X-Lease-ID",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Optional fencing token proof (lease requests only)",
                        "name": "X-Fencing-Token",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Streamed JSON state",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "204": {
                        "description": "No state stored for this key",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/index/flush": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Forces the namespace index writer to flush pending documents. Supports synchronous (wait) and asynchronous modes.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "index"
                ],
                "summary": "Flush namespace index segments",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Flush mode (wait or async)",
                        "name": "mode",
                        "in": "query"
                    },
                    {
                        "description": "Flush request",
                        "name": "request",
                        "in": "body",
                        "schema": {
                            "$ref": "#/definitions/api.IndexFlushRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.IndexFlushResponse"
                        }
                    },
                    "202": {
                        "description": "Accepted",
                        "schema": {
                            "$ref": "#/definitions/api.IndexFlushResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/keepalive": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Refresh an existing lease before it expires. Requires the xid lease identifier minted by Acquire and its fencing token; returns the new expiration timestamp.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Extend an active lease TTL",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the request body omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Key override when the request body omits it",
                        "name": "key",
                        "in": "query"
                    },
                    {
                        "description": "Lease keepalive parameters",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.KeepAliveRequest"
                        }
                    },
                    {
                        "type": "string",
                        "description": "Fencing token associated with the lease (from Acquire response)",
                        "name": "X-Fencing-Token",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Transaction identifier (required when the lease is enlisted in a txn)",
                        "name": "X-Txn-ID",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.KeepAliveResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/metadata": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Mutates lock metadata (e.g. query visibility) while holding the lease. Optional CAS headers guard against concurrent updates.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Update lock metadata",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease key",
                        "name": "key",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Lease identifier (xid from Acquire, 20-char lowercase base32)",
                        "name": "X-Lease-ID",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Transaction identifier (xid from Acquire)",
                        "name": "X-Txn-ID",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Optional fencing token proof",
                        "name": "X-Fencing-Token",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Conditionally update when the current version matches",
                        "name": "X-If-Version",
                        "in": "header"
                    },
                    {
                        "description": "Metadata payload",
                        "name": "metadata",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/httpapi.metadataMutation"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.MetadataUpdateResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/namespace": {
            "get": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Returns query engine preferences for the namespace.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "namespace"
                ],
                "summary": "Get namespace configuration",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.NamespaceConfigResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Updates query engine preferences for the namespace.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "namespace"
                ],
                "summary": "Update namespace configuration",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Conditionally update when the ETag matches",
                        "name": "If-Match",
                        "in": "header"
                    },
                    {
                        "description": "Namespace configuration payload",
                        "name": "config",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.NamespaceConfigRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.NamespaceConfigResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/query": {
            "post": {
                "description": "Executes a selector-based search within a namespace. When return=keys, responds with a JSON envelope containing keys + cursor. When return=documents, streams NDJSON rows (one document per line).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json",
                    "application/x-ndjson"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Query keys within a namespace",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Maximum number of keys to return (1-1000, defaults to 100)",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Opaque pagination cursor",
                        "name": "cursor",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Selector JSON (optional when providing a JSON body)",
                        "name": "selector",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Return mode (keys or documents)",
                        "name": "return",
                        "in": "query"
                    },
                    {
                        "description": "Query request (selector, limit, cursor)",
                        "name": "request",
                        "in": "body",
                        "schema": {
                            "$ref": "#/definitions/api.QueryRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "NDJSON stream when return=documents",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/queue/ack": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Confirms processing of a delivery and deletes the message or its retry lease. If a txn_id is present (or the lease is already enlisted) and TC is enabled, this records a commit decision via the TC.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "queue"
                ],
                "summary": "Acknowledge a delivered message",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the request body omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "description": "Acknowledgement payload",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.AckRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.AckResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/queue/dequeue": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Dequeues one or more messages from the specified queue. Supports long polling via wait_seconds. If txn_id is provided, the message is enlisted as a transaction participant.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "queue"
                ],
                "summary": "Dequeue messages",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the request body omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Queue name override when the request body omits it",
                        "name": "queue",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Owner override when the request body omits it",
                        "name": "owner",
                        "in": "query"
                    },
                    {
                        "description": "Dequeue parameters (queue, owner, wait_seconds, visibility)",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.DequeueRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.DequeueResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/queue/dequeueWithState": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Dequeues messages and includes their associated state blobs in a multipart/related response when available. If txn_id is provided, the message and state sidecar are enlisted as transaction participants.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "multipart/related"
                ],
                "tags": [
                    "queue"
                ],
                "summary": "Fetch queue messages with state sidecars",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the request body omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Queue name override when the request body omits it",
                        "name": "queue",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Owner override when the request body omits it",
                        "name": "owner",
                        "in": "query"
                    },
                    {
                        "description": "Dequeue parameters",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.DequeueRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "multipart/related stream: message metadata, payload, optional state sidecar",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/queue/enqueue": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Writes a message into the durable queue. The payload is streamed directly and may include optional attributes.",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "queue"
                ],
                "summary": "Enqueue a message",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the metadata omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Queue override when the metadata omits it",
                        "name": "queue",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "JSON encoded api.EnqueueRequest metadata",
                        "name": "meta",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "file",
                        "description": "Optional payload stream",
                        "name": "payload",
                        "in": "formData"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.EnqueueResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/queue/extend": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Extends the visibility timeout and lease window for an in-flight message. txn_id is optional; if omitted the server uses the lease's txn_id (if any).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "queue"
                ],
                "summary": "Extend a delivery lease",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the request body omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "description": "Extend payload",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.ExtendRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.ExtendResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/queue/nack": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Requeues the delivery with optional delay and last error metadata (intent=failure only). Set intent=defer to requeue intentionally without consuming max_attempts failure budget. If a txn_id is present (or the lease is already enlisted) and TC is enabled, this records a rollback decision via the TC.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "queue"
                ],
                "summary": "Return a message to the queue",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the request body omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "description": "Negative acknowledgement payload",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.NackRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.NackResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/queue/stats": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Returns side-effect-free queue stats for one namespace/queue, including dispatcher waiter metrics and current head availability snapshot.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "queue"
                ],
                "summary": "Read queue runtime stats",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the request body omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Queue name override when the request body omits it",
                        "name": "queue",
                        "in": "query"
                    },
                    {
                        "description": "Queue stats parameters",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.QueueStatsRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.QueueStatsResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/queue/subscribe": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Opens a long-lived multipart/related stream of deliveries for the specified queue owner. Each part contains message metadata and payload. If txn_id is provided, each delivery is enlisted as a transaction participant.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "multipart/related"
                ],
                "tags": [
                    "queue"
                ],
                "summary": "Stream queue deliveries",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the request body omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Queue name override when the request body omits it",
                        "name": "queue",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Owner override when the request body omits it",
                        "name": "owner",
                        "in": "query"
                    },
                    {
                        "description": "Subscription parameters (queue, owner, wait_seconds, visibility)",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.DequeueRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "multipart/related stream: message metadata + payload",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/queue/subscribeWithState": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Opens a long-lived multipart/related stream where each part contains message metadata, payload, and state snapshot when available. If txn_id is provided, the message and state sidecar are enlisted as transaction participants.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "multipart/related"
                ],
                "tags": [
                    "queue"
                ],
                "summary": "Stream queue deliveries with state",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the request body omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Queue name override when the request body omits it",
                        "name": "queue",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Owner override when the request body omits it",
                        "name": "owner",
                        "in": "query"
                    },
                    {
                        "description": "Subscription parameters (queue, owner, wait_seconds, visibility)",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.DequeueRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "multipart/related stream: message metadata, payload, optional state snapshot",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/queue/watch": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Opens a text/event-stream channel that emits queue visibility updates without consuming messages.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "text/event-stream"
                ],
                "tags": [
                    "queue"
                ],
                "summary": "Watch queue availability (SSE)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the request body omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Queue name override when the request body omits it",
                        "name": "queue",
                        "in": "query"
                    },
                    {
                        "description": "Queue watch parameters",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.QueueWatchRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "SSE stream: queue_watch events",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/release": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Releases the lease associated with the provided key and lease identifier. The request must include the xid `txn_id` from Acquire; set `rollback=true` to abandon staged changes, otherwise the release commits the staged state.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Release a held lease",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override when the request body omits it",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Key override when the request body omits it",
                        "name": "key",
                        "in": "query"
                    },
                    {
                        "description": "Lease release parameters",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.ReleaseRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.ReleaseResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/remove": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Removes the stored state blob if the caller holds the lease. Optional CAS headers guard against concurrent updates.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Delete the JSON state for a key",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease key",
                        "name": "key",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Lease identifier (xid from Acquire, 20-char lowercase base32)",
                        "name": "X-Lease-ID",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Transaction identifier (xid from Acquire)",
                        "name": "X-Txn-ID",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Optional fencing token proof",
                        "name": "X-Fencing-Token",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Conditionally remove when version matches",
                        "name": "X-If-Version",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Conditionally remove when state ETag matches",
                        "name": "X-If-State-ETag",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.RemoveResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/tc/cluster/announce": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Refreshes the caller's membership lease. Requires TC-auth with a server certificate when mTLS is enabled (unless tc-disable-auth is set).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "Announce TC cluster membership",
                "parameters": [
                    {
                        "description": "TC cluster announce request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.TCClusterAnnounceRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TCClusterAnnounceResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/tc/cluster/leave": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Deletes the caller's membership lease. Requires TC-auth with a server certificate when mTLS is enabled (unless tc-disable-auth is set).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "Leave the TC cluster",
                "parameters": [
                    {
                        "description": "TC cluster leave request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.TCClusterLeaveRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TCClusterLeaveResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/tc/cluster/list": {
            "get": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "List the current active TC cluster membership list. Requires TC-auth when mTLS is enabled (unless tc-disable-auth is set).",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "List TC cluster membership",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TCClusterListResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/tc/leader": {
            "get": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Returns the observed TC leader state. Requires TC-auth when mTLS is enabled (unless tc-disable-auth is set).",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "Return TC leader state",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TCLeaderResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/tc/lease/acquire": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Acquire a TC leader lease as part of the TC election quorum. Requires TC-auth when mTLS is enabled (unless tc-disable-auth is set).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "Acquire a TC leader lease",
                "parameters": [
                    {
                        "description": "TC lease acquire request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.TCLeaseAcquireRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TCLeaseAcquireResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/tc/lease/release": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Release a TC leader lease as part of the TC election quorum. Requires TC-auth when mTLS is enabled (unless tc-disable-auth is set).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "Release a TC leader lease",
                "parameters": [
                    {
                        "description": "TC lease release request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.TCLeaseReleaseRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TCLeaseReleaseResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/tc/lease/renew": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Renew a TC leader lease as part of the TC election quorum. Requires TC-auth when mTLS is enabled (unless tc-disable-auth is set).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "Renew a TC leader lease",
                "parameters": [
                    {
                        "description": "TC lease renew request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.TCLeaseRenewRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TCLeaseRenewResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/tc/rm/list": {
            "get": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "List RM endpoints by backend hash. Requires TC-auth when mTLS is enabled (unless tc-disable-auth is set).",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "List RM registry entries",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TCRMListResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/tc/rm/register": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Register an RM endpoint for a backend hash. Replicates across the TC cluster. Requires TC-auth with a server certificate when mTLS is enabled (unless tc-disable-auth is set).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "Register an RM endpoint",
                "parameters": [
                    {
                        "description": "RM register request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.TCRMRegisterRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TCRMRegisterResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "502": {
                        "description": "Bad Gateway",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/tc/rm/unregister": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Unregister an RM endpoint for a backend hash. Replicates across the TC cluster. Requires TC-auth with a server certificate when mTLS is enabled (unless tc-disable-auth is set).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "Unregister an RM endpoint",
                "parameters": [
                    {
                        "description": "RM unregister request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.TCRMUnregisterRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TCRMUnregisterResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "502": {
                        "description": "Bad Gateway",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/txn/commit": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Apply a commit decision for a transaction on the local RM. Requires tc_term when TC leadership is enabled. Requires TC-auth when mTLS is enabled (unless tc-disable-auth is set).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "Apply a commit decision on an RM",
                "parameters": [
                    {
                        "description": "Txn decision request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.TxnDecisionRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TxnDecisionResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/txn/decide": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Record a transaction decision (pending|commit|rollback). Commit/rollback decisions are applied locally and fan out to RMs. TC-auth only; called by lockd RMs or TC tooling. Any TC endpoint can receive this call; non-leaders forward to the leader, which stamps the tc_term fencing token. Requires TC-auth when mTLS is enabled (unless tc-disable-auth is set).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "Record a transaction decision",
                "parameters": [
                    {
                        "description": "Txn decision request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.TxnDecisionRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TxnDecisionResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "502": {
                        "description": "Bad Gateway",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/txn/replay": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Apply the recorded decision for a transaction (commit or rollback) to its participants. Pending transactions remain unchanged unless expired, in which case they roll back. Idempotent and safe to retry. Requires TC-auth when mTLS is enabled (unless tc-disable-auth is set).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "Replay a transaction decision",
                "parameters": [
                    {
                        "description": "Txn replay request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.TxnReplayRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TxnReplayResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/txn/rollback": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Apply a rollback decision for a transaction on the local RM. Requires tc_term when TC leadership is enabled. Requires TC-auth when mTLS is enabled (unless tc-disable-auth is set).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "transaction"
                ],
                "summary": "Apply a rollback decision on an RM",
                "parameters": [
                    {
                        "description": "Txn decision request",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/api.TxnDecisionRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TxnDecisionResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/v1/update": {
            "post": {
                "security": [
                    {
                        "mTLS": []
                    }
                ],
                "description": "Streams JSON from the request body, compacts it, and installs it if the caller holds the lease. Optional CAS headers guard against concurrent updates.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "lease"
                ],
                "summary": "Atomically update the JSON state for a key",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace override (defaults to server setting)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Lease key",
                        "name": "key",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Lease identifier (xid from Acquire, 20-char lowercase base32)",
                        "name": "X-Lease-ID",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Transaction identifier (xid from Acquire)",
                        "name": "X-Txn-ID",
                        "in": "header",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Optional fencing token proof",
                        "name": "X-Fencing-Token",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Conditionally update when the current version matches",
                        "name": "X-If-Version",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Conditionally update when the state ETag matches",
                        "name": "X-If-State-ETag",
                        "in": "header"
                    },
                    {
                        "description": "New JSON state payload",
                        "name": "state",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.UpdateResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    },
                    "503": {
                        "description": "Service Unavailable",
                        "schema": {
                            "$ref": "#/definitions/api.ErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "api.AckRequest": {
            "type": "object",
            "properties": {
                "fencing_token": {
                    "description": "FencingToken is the monotonic token used to fence stale writers.",
                    "type": "integer"
                },
                "lease_id": {
                    "description": "LeaseID identifies the active lease required for protected mutations.",
                    "type": "string"
                },
                "message_id": {
                    "description": "MessageID uniquely identifies a queue message.",
                    "type": "string"
                },
                "meta_etag": {
                    "description": "MetaETag is the queue metadata entity tag used for CAS semantics.",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "queue": {
                    "description": "Queue is the queue name targeted by the operation.",
                    "type": "string"
                },
                "state_etag": {
                    "description": "StateETag is the state entity tag used for CAS semantics.",
                    "type": "string"
                },
                "state_fencing_token": {
                    "description": "StateFencingToken is the fencing token for the associated workflow state lease.",
                    "type": "integer"
                },
                "state_lease_id": {
                    "description": "StateLeaseID identifies the associated workflow state lease.",
                    "type": "string"
                },
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                }
            }
        },
        "api.AckResponse": {
            "type": "object",
            "properties": {
                "acked": {
                    "description": "Acked maps to the \"acked\" JSON field.",
                    "type": "boolean"
                },
                "correlation_id": {
                    "description": "CorrelationID links related operations across request/response logs.",
                    "type": "string"
                }
            }
        },
        "api.AcquireRequest": {
            "type": "object",
            "properties": {
                "block_seconds": {
                    "description": "BlockSecs controls acquire wait behavior in seconds (-1 no-wait, 0 indefinite, \u003e0 bounded wait).",
                    "type": "integer"
                },
                "if_not_exists": {
                    "description": "IfNotExists enforces create-only semantics: fail when the key already exists.",
                    "type": "boolean"
                },
                "key": {
                    "description": "Key identifies the lock/state key within the namespace.",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "owner": {
                    "description": "Owner identifies the caller or worker owning the lease or queue delivery.",
                    "type": "string"
                },
                "ttl_seconds": {
                    "description": "TTLSeconds is a duration in seconds.",
                    "type": "integer"
                },
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                }
            }
        },
        "api.AcquireResponse": {
            "type": "object",
            "properties": {
                "correlation_id": {
                    "description": "CorrelationID links related operations across request/response logs.",
                    "type": "string"
                },
                "expires_at_unix": {
                    "description": "ExpiresAt is the lease expiry time as a Unix timestamp in seconds.",
                    "type": "integer"
                },
                "fencing_token": {
                    "description": "FencingToken is the monotonic token used to fence stale writers.",
                    "type": "integer"
                },
                "key": {
                    "description": "Key identifies the lock/state key within the namespace.",
                    "type": "string"
                },
                "lease_id": {
                    "description": "LeaseID identifies the active lease required for protected mutations.",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "owner": {
                    "description": "Owner identifies the caller or worker owning the lease or queue delivery.",
                    "type": "string"
                },
                "retry_after_seconds": {
                    "description": "RetryAfter is the server hint (seconds) before retrying a contended acquire.",
                    "type": "integer"
                },
                "state_etag": {
                    "description": "StateETag is the state entity tag used for CAS semantics.",
                    "type": "string"
                },
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                },
                "version": {
                    "description": "Version is the lockd monotonic version for the target object.",
                    "type": "integer"
                }
            }
        },
        "api.AttachmentInfo": {
            "type": "object",
            "properties": {
                "content_type": {
                    "description": "ContentType is the media type associated with the payload.",
                    "type": "string"
                },
                "created_at_unix": {
                    "description": "CreatedAtUnix is the creation timestamp as Unix seconds.",
                    "type": "integer"
                },
                "id": {
                    "description": "ID is the unique identifier for the referenced object.",
                    "type": "string"
                },
                "name": {
                    "description": "Name is the human-readable identifier for the referenced object.",
                    "type": "string"
                },
                "plaintext_sha256": {
                    "description": "PlaintextSHA256 is the SHA-256 checksum of the uploaded plaintext payload.",
                    "type": "string"
                },
                "size": {
                    "description": "Size is the payload size in bytes.",
                    "type": "integer"
                },
                "updated_at_unix": {
                    "description": "UpdatedAtUnix is the last update timestamp as Unix seconds.",
                    "type": "integer"
                }
            }
        },
        "api.AttachmentListResponse": {
            "type": "object",
            "properties": {
                "attachments": {
                    "description": "Attachments enumerates attachments associated with the target key.",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/api.AttachmentInfo"
                    }
                },
                "key": {
                    "description": "Key identifies the lock/state key within the namespace.",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                }
            }
        },
        "api.DequeueRequest": {
            "type": "object",
            "properties": {
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "owner": {
                    "description": "Owner identifies the caller or worker owning the lease or queue delivery.",
                    "type": "string"
                },
                "page_size": {
                    "description": "PageSize limits the number of items returned in one response.",
                    "type": "integer"
                },
                "queue": {
                    "description": "Queue is the queue name targeted by the operation.",
                    "type": "string"
                },
                "start_after": {
                    "description": "StartAfter is the server-issued cursor for continuing from a prior position.",
                    "type": "string"
                },
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                },
                "visibility_timeout_seconds": {
                    "description": "VisibilityTimeoutSeconds controls how long a leased message remains invisible, in seconds.",
                    "type": "integer"
                },
                "wait_seconds": {
                    "description": "WaitSeconds controls long-poll wait time in seconds for dequeue/subscribe calls.",
                    "type": "integer"
                }
            }
        },
        "api.DequeueResponse": {
            "type": "object",
            "properties": {
                "message": {
                    "description": "Message carries the dequeued queue message envelope when available.",
                    "allOf": [
                        {
                            "$ref": "#/definitions/api.Message"
                        }
                    ]
                },
                "next_cursor": {
                    "description": "NextCursor is the server-issued cursor for subsequent pagination.",
                    "type": "string"
                }
            }
        },
        "api.DescribeResponse": {
            "type": "object",
            "properties": {
                "expires_at_unix": {
                    "description": "ExpiresAt is the lease expiry time as a Unix timestamp in seconds when a lease is present.",
                    "type": "integer"
                },
                "key": {
                    "description": "Key identifies the lock/state key within the namespace.",
                    "type": "string"
                },
                "lease_id": {
                    "description": "LeaseID identifies the active lease required for protected mutations.",
                    "type": "string"
                },
                "metadata": {
                    "description": "Metadata carries metadata values returned by the server for this object.",
                    "allOf": [
                        {
                            "$ref": "#/definitions/api.MetadataAttributes"
                        }
                    ]
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "owner": {
                    "description": "Owner identifies the caller or worker owning the lease or queue delivery.",
                    "type": "string"
                },
                "state_etag": {
                    "description": "StateETag is the state entity tag used for CAS semantics.",
                    "type": "string"
                },
                "updated_at_unix": {
                    "description": "UpdatedAt is the last committed state update time as a Unix timestamp in seconds.",
                    "type": "integer"
                },
                "version": {
                    "description": "Version is the lockd monotonic version for the target object.",
                    "type": "integer"
                }
            }
        },
        "api.EnqueueResponse": {
            "type": "object",
            "properties": {
                "attempts": {
                    "description": "Attempts is the number of delivery attempts observed so far.",
                    "type": "integer"
                },
                "correlation_id": {
                    "description": "CorrelationID links related operations across request/response logs.",
                    "type": "string"
                },
                "failure_attempts": {
                    "description": "FailureAttempts is the number of failed attempts observed so far.",
                    "type": "integer"
                },
                "max_attempts": {
                    "description": "MaxAttempts caps how many failed attempts are allowed before terminal handling.",
                    "type": "integer"
                },
                "message_id": {
                    "description": "MessageID uniquely identifies a queue message.",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "not_visible_until_unix": {
                    "description": "NotVisibleUntilUnix is when the message becomes visible for delivery again, as Unix seconds.",
                    "type": "integer"
                },
                "payload_bytes": {
                    "description": "PayloadBytes is the payload size in bytes.",
                    "type": "integer"
                },
                "queue": {
                    "description": "Queue is the queue name targeted by the operation.",
                    "type": "string"
                },
                "visibility_timeout_seconds": {
                    "description": "VisibilityTimeoutSeconds controls how long a leased message remains invisible, in seconds.",
                    "type": "integer"
                }
            }
        },
        "api.ErrorResponse": {
            "type": "object",
            "properties": {
                "current_etag": {
                    "description": "CurrentETag returns the server's current ETag for conflict diagnostics.",
                    "type": "string"
                },
                "current_version": {
                    "description": "CurrentVersion returns the server's current version for conflict diagnostics.",
                    "type": "integer"
                },
                "detail": {
                    "description": "Detail provides human-readable diagnostic context for the error.",
                    "type": "string"
                },
                "error": {
                    "description": "ErrorCode is the stable lockd error identifier.",
                    "type": "string"
                },
                "leader_endpoint": {
                    "description": "LeaderEndpoint identifies the active leader endpoint to retry against when applicable.",
                    "type": "string"
                },
                "retry_after_seconds": {
                    "description": "RetryAfterSeconds is the server-provided retry hint in seconds.",
                    "type": "integer"
                }
            }
        },
        "api.ExtendRequest": {
            "type": "object",
            "properties": {
                "extend_by_seconds": {
                    "description": "ExtendBySeconds is the requested visibility extension duration in seconds.",
                    "type": "integer"
                },
                "fencing_token": {
                    "description": "FencingToken is the monotonic token used to fence stale writers.",
                    "type": "integer"
                },
                "lease_id": {
                    "description": "LeaseID identifies the active lease required for protected mutations.",
                    "type": "string"
                },
                "message_id": {
                    "description": "MessageID uniquely identifies a queue message.",
                    "type": "string"
                },
                "meta_etag": {
                    "description": "MetaETag is the queue metadata entity tag used for CAS semantics.",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "queue": {
                    "description": "Queue is the queue name targeted by the operation.",
                    "type": "string"
                },
                "state_fencing_token": {
                    "description": "StateFencingToken is the fencing token for the associated workflow state lease.",
                    "type": "integer"
                },
                "state_lease_id": {
                    "description": "StateLeaseID identifies the associated workflow state lease.",
                    "type": "string"
                },
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                }
            }
        },
        "api.ExtendResponse": {
            "type": "object",
            "properties": {
                "correlation_id": {
                    "description": "CorrelationID links related operations across request/response logs.",
                    "type": "string"
                },
                "lease_expires_at_unix": {
                    "description": "LeaseExpiresAtUnix is the refreshed message lease expiry as a Unix timestamp in seconds.",
                    "type": "integer"
                },
                "meta_etag": {
                    "description": "MetaETag is the queue metadata entity tag used for CAS semantics.",
                    "type": "string"
                },
                "state_lease_expires_at_unix": {
                    "description": "StateLeaseExpiresAtUnix is the refreshed state lease expiry as a Unix timestamp in seconds when state is attached.",
                    "type": "integer"
                },
                "visibility_timeout_seconds": {
                    "description": "VisibilityTimeoutSeconds controls how long a leased message remains invisible, in seconds.",
                    "type": "integer"
                }
            }
        },
        "api.IndexFlushRequest": {
            "type": "object",
            "properties": {
                "mode": {
                    "description": "Mode controls operation behavior (for example async vs wait).",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                }
            }
        },
        "api.IndexFlushResponse": {
            "type": "object",
            "properties": {
                "accepted": {
                    "description": "Accepted reports that the server accepted the request for asynchronous processing.",
                    "type": "boolean"
                },
                "flush_id": {
                    "description": "FlushID identifies the asynchronous flush operation when returned.",
                    "type": "string"
                },
                "flushed": {
                    "description": "Flushed reports that the requested index flush completed synchronously.",
                    "type": "boolean"
                },
                "index_seq": {
                    "description": "IndexSeq reports the index sequence observed by the operation.",
                    "type": "integer"
                },
                "mode": {
                    "description": "Mode controls operation behavior (for example async vs wait).",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "pending": {
                    "description": "Pending reports that flush work remains and will complete asynchronously.",
                    "type": "boolean"
                }
            }
        },
        "api.KeepAliveRequest": {
            "type": "object",
            "properties": {
                "key": {
                    "description": "Key identifies the lock/state key within the namespace.",
                    "type": "string"
                },
                "lease_id": {
                    "description": "LeaseID identifies the active lease required for protected mutations.",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "ttl_seconds": {
                    "description": "TTLSeconds is a duration in seconds.",
                    "type": "integer"
                },
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                }
            }
        },
        "api.KeepAliveResponse": {
            "type": "object",
            "properties": {
                "expires_at_unix": {
                    "description": "ExpiresAt is the refreshed lease expiry time as a Unix timestamp in seconds.",
                    "type": "integer"
                }
            }
        },
        "api.Message": {
            "type": "object",
            "properties": {
                "attempts": {
                    "description": "Attempts is the number of delivery attempts observed so far.",
                    "type": "integer"
                },
                "attributes": {
                    "description": "Attributes carries arbitrary JSON metadata associated with the message or request.",
                    "type": "object",
                    "additionalProperties": {}
                },
                "correlation_id": {
                    "description": "CorrelationID links related operations across request/response logs.",
                    "type": "string"
                },
                "failure_attempts": {
                    "description": "FailureAttempts is the number of failed attempts observed so far.",
                    "type": "integer"
                },
                "fencing_token": {
                    "description": "FencingToken is the monotonic token used to fence stale writers.",
                    "type": "integer"
                },
                "lease_expires_at_unix": {
                    "description": "LeaseExpiresAtUnix is when the message lease expires, as a Unix timestamp in seconds.",
                    "type": "integer"
                },
                "lease_id": {
                    "description": "LeaseID identifies the active lease required for protected mutations.",
                    "type": "string"
                },
                "max_attempts": {
                    "description": "MaxAttempts caps how many failed attempts are allowed before terminal handling.",
                    "type": "integer"
                },
                "message_id": {
                    "description": "MessageID uniquely identifies a queue message.",
                    "type": "string"
                },
                "meta_etag": {
                    "description": "MetaETag is the queue metadata entity tag used for CAS semantics.",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "not_visible_until_unix": {
                    "description": "NotVisibleUntilUnix is when the message becomes visible again, as a Unix timestamp in seconds.",
                    "type": "integer"
                },
                "payload_bytes": {
                    "description": "PayloadBytes is the payload size in bytes.",
                    "type": "integer"
                },
                "payload_content_type": {
                    "description": "PayloadContentType is the media type for the queue payload.",
                    "type": "string"
                },
                "queue": {
                    "description": "Queue is the queue name targeted by the operation.",
                    "type": "string"
                },
                "state_etag": {
                    "description": "StateETag is the state entity tag used for CAS semantics.",
                    "type": "string"
                },
                "state_fencing_token": {
                    "description": "StateFencingToken is the fencing token for the associated workflow state lease.",
                    "type": "integer"
                },
                "state_lease_expires_at_unix": {
                    "description": "StateLeaseExpiresAtUnix is when the associated state lease expires, as a Unix timestamp in seconds.",
                    "type": "integer"
                },
                "state_lease_id": {
                    "description": "StateLeaseID identifies the associated workflow state lease.",
                    "type": "string"
                },
                "state_txn_id": {
                    "description": "StateTxnID is the transaction identifier attached to the state lease when present.",
                    "type": "string"
                },
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                },
                "visibility_timeout_seconds": {
                    "description": "VisibilityTimeoutSeconds controls how long a leased message remains invisible, in seconds.",
                    "type": "integer"
                }
            }
        },
        "api.MetadataAttributes": {
            "type": "object",
            "properties": {
                "query_hidden": {
                    "description": "QueryHidden controls whether the key is hidden from selector/query results.",
                    "type": "boolean"
                }
            }
        },
        "api.MetadataUpdateResponse": {
            "type": "object",
            "properties": {
                "key": {
                    "description": "Key identifies the lock/state key within the namespace.",
                    "type": "string"
                },
                "metadata": {
                    "description": "Metadata carries metadata values returned by the server for this object.",
                    "allOf": [
                        {
                            "$ref": "#/definitions/api.MetadataAttributes"
                        }
                    ]
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "version": {
                    "description": "Version is the lockd monotonic version for the target object.",
                    "type": "integer"
                }
            }
        },
        "api.NackIntent": {
            "type": "string",
            "enum": [
                "failure",
                "defer"
            ],
            "x-enum-varnames": [
                "NackIntentFailure",
                "NackIntentDefer"
            ]
        },
        "api.NackRequest": {
            "type": "object",
            "properties": {
                "delay_seconds": {
                    "description": "DelaySeconds postpones message visibility by the specified number of seconds.",
                    "type": "integer"
                },
                "fencing_token": {
                    "description": "FencingToken is the monotonic token used to fence stale writers.",
                    "type": "integer"
                },
                "intent": {
                    "description": "Intent controls whether the requeue counts against max_attempts.",
                    "allOf": [
                        {
                            "$ref": "#/definitions/api.NackIntent"
                        }
                    ]
                },
                "last_error": {
                    "description": "LastError carries optional error metadata persisted for intent=failure."
                },
                "lease_id": {
                    "description": "LeaseID identifies the active lease required for protected mutations.",
                    "type": "string"
                },
                "message_id": {
                    "description": "MessageID uniquely identifies a queue message.",
                    "type": "string"
                },
                "meta_etag": {
                    "description": "MetaETag is the queue metadata entity tag used for CAS semantics.",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "queue": {
                    "description": "Queue is the queue name targeted by the operation.",
                    "type": "string"
                },
                "state_etag": {
                    "description": "StateETag is the state entity tag used for CAS semantics.",
                    "type": "string"
                },
                "state_fencing_token": {
                    "description": "StateFencingToken is the fencing token for the associated workflow state lease.",
                    "type": "integer"
                },
                "state_lease_id": {
                    "description": "StateLeaseID identifies the associated workflow state lease.",
                    "type": "string"
                },
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                }
            }
        },
        "api.NackResponse": {
            "type": "object",
            "properties": {
                "correlation_id": {
                    "description": "CorrelationID links related operations across request/response logs.",
                    "type": "string"
                },
                "meta_etag": {
                    "description": "MetaETag is the queue metadata entity tag used for CAS semantics.",
                    "type": "string"
                },
                "requeued": {
                    "description": "Requeued maps to the \"requeued\" JSON field.",
                    "type": "boolean"
                }
            }
        },
        "api.NamespaceConfigRequest": {
            "type": "object",
            "properties": {
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "query": {
                    "description": "Query contains namespace query-engine configuration settings.",
                    "allOf": [
                        {
                            "$ref": "#/definitions/api.NamespaceQueryConfig"
                        }
                    ]
                }
            }
        },
        "api.NamespaceConfigResponse": {
            "type": "object",
            "properties": {
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "query": {
                    "description": "Query contains namespace query-engine configuration settings.",
                    "allOf": [
                        {
                            "$ref": "#/definitions/api.NamespaceQueryConfig"
                        }
                    ]
                }
            }
        },
        "api.NamespaceQueryConfig": {
            "type": "object",
            "properties": {
                "fallback_engine": {
                    "description": "FallbackEngine selects the fallback strategy when the preferred engine cannot satisfy the request.",
                    "type": "string"
                },
                "preferred_engine": {
                    "description": "PreferredEngine selects the primary query execution strategy for the namespace.",
                    "type": "string"
                }
            }
        },
        "api.QueryRequest": {
            "type": "object",
            "properties": {
                "cursor": {
                    "description": "Cursor is the pagination cursor returned by the query engine.",
                    "type": "string"
                },
                "fields": {
                    "description": "Fields maps to the \"fields\" JSON field.",
                    "type": "object",
                    "additionalProperties": {}
                },
                "limit": {
                    "description": "Limit caps the number of query results returned.",
                    "type": "integer"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "return": {
                    "description": "Return controls whether query responses return keys or full documents.",
                    "allOf": [
                        {
                            "$ref": "#/definitions/api.QueryReturn"
                        }
                    ]
                },
                "selector": {
                    "description": "Selector is the LQL selector AST used to match keys/documents.",
                    "type": "object",
                    "x-example": "{\"eq\":{\"field\":\"type\",\"value\":\"alpha\"}}"
                }
            }
        },
        "api.QueryResponse": {
            "type": "object",
            "properties": {
                "cursor": {
                    "description": "Cursor is the pagination cursor returned by the query engine.",
                    "type": "string"
                },
                "index_seq": {
                    "description": "IndexSeq is the index sequence observed by the query execution.",
                    "type": "integer"
                },
                "keys": {
                    "description": "Keys contains matching key identifiers for key-mode query responses.",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "metadata": {
                    "description": "Metadata carries metadata values returned by the server for this object.",
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    }
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                }
            }
        },
        "api.QueryReturn": {
            "type": "string",
            "enum": [
                "keys",
                "documents"
            ],
            "x-enum-varnames": [
                "QueryReturnKeys",
                "QueryReturnDocuments"
            ]
        },
        "api.QueueStatsRequest": {
            "type": "object",
            "properties": {
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "queue": {
                    "description": "Queue is the queue name targeted by the operation.",
                    "type": "string"
                }
            }
        },
        "api.QueueStatsResponse": {
            "type": "object",
            "properties": {
                "available": {
                    "description": "Available reports whether a visible head message is currently available.",
                    "type": "boolean"
                },
                "correlation_id": {
                    "description": "CorrelationID links related operations across request/response logs.",
                    "type": "string"
                },
                "has_active_watcher": {
                    "description": "HasActiveWatcher indicates whether the dispatcher currently maintains a live watcher for this queue.",
                    "type": "boolean"
                },
                "head_age_seconds": {
                    "description": "HeadAgeSeconds is the age of the visible head message in seconds.",
                    "type": "integer"
                },
                "head_enqueued_at_unix": {
                    "description": "HeadEnqueuedAtUnix is when the visible head message was originally enqueued, as Unix seconds.",
                    "type": "integer"
                },
                "head_message_id": {
                    "description": "HeadMessageID is the current visible head message identifier when available.",
                    "type": "string"
                },
                "head_not_visible_until_unix": {
                    "description": "HeadNotVisibleUntilUnix is when the head message became visible, as Unix seconds.",
                    "type": "integer"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "pending_candidates": {
                    "description": "PendingCandidates is the number of ready candidates currently buffered for this queue by the dispatcher.",
                    "type": "integer"
                },
                "queue": {
                    "description": "Queue is the queue name targeted by the operation.",
                    "type": "string"
                },
                "total_consumers": {
                    "description": "TotalConsumers is the number of active consumers across all queues for this server process.",
                    "type": "integer"
                },
                "waiting_consumers": {
                    "description": "WaitingConsumers is the number of active consumers currently blocked waiting for work on this queue.",
                    "type": "integer"
                }
            }
        },
        "api.QueueWatchRequest": {
            "type": "object",
            "properties": {
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "queue": {
                    "description": "Queue is the queue name targeted by the operation.",
                    "type": "string"
                }
            }
        },
        "api.ReleaseRequest": {
            "type": "object",
            "properties": {
                "key": {
                    "description": "Key identifies the lock/state key within the namespace.",
                    "type": "string"
                },
                "lease_id": {
                    "description": "LeaseID identifies the active lease required for protected mutations.",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                },
                "rollback": {
                    "description": "Rollback requests rollback semantics instead of commit for lease release.",
                    "type": "boolean"
                },
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                }
            }
        },
        "api.ReleaseResponse": {
            "type": "object",
            "properties": {
                "released": {
                    "description": "Released reports whether the lease or TC lock release succeeded.",
                    "type": "boolean"
                }
            }
        },
        "api.RemoveResponse": {
            "type": "object",
            "properties": {
                "new_version": {
                    "description": "NewVersion is the updated monotonic version after a successful mutation.",
                    "type": "integer"
                },
                "removed": {
                    "description": "Removed reports whether the target state document was removed.",
                    "type": "boolean"
                }
            }
        },
        "api.TCClusterAnnounceRequest": {
            "type": "object",
            "properties": {
                "self_endpoint": {
                    "description": "SelfEndpoint is the announcing node endpoint for cluster membership.",
                    "type": "string"
                }
            }
        },
        "api.TCClusterAnnounceResponse": {
            "type": "object",
            "properties": {
                "endpoints": {
                    "description": "Endpoints lists active endpoints known for this cluster or backend.",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "expires_at_unix": {
                    "description": "ExpiresAtUnix is when this node's membership lease expires, as a Unix timestamp in seconds.",
                    "type": "integer"
                },
                "updated_at_unix": {
                    "description": "UpdatedAtUnix is when the cluster membership set was last updated, as a Unix timestamp in seconds.",
                    "type": "integer"
                }
            }
        },
        "api.TCClusterLeaveRequest": {
            "type": "object"
        },
        "api.TCClusterLeaveResponse": {
            "type": "object",
            "properties": {
                "endpoints": {
                    "description": "Endpoints lists active endpoints known for this cluster or backend.",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "updated_at_unix": {
                    "description": "UpdatedAtUnix is when the cluster membership set was last updated, as a Unix timestamp in seconds.",
                    "type": "integer"
                }
            }
        },
        "api.TCClusterListResponse": {
            "type": "object",
            "properties": {
                "endpoints": {
                    "description": "Endpoints lists active endpoints known for this cluster or backend.",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "updated_at_unix": {
                    "description": "UpdatedAtUnix is when the cluster membership set was last updated, as a Unix timestamp in seconds.",
                    "type": "integer"
                }
            }
        },
        "api.TCLeaderResponse": {
            "type": "object",
            "properties": {
                "expires_at": {
                    "description": "ExpiresAtUnix is the active leader lease expiry as a Unix timestamp in seconds.",
                    "type": "integer"
                },
                "leader_endpoint": {
                    "description": "LeaderEndpoint identifies the active leader endpoint to retry against when applicable.",
                    "type": "string"
                },
                "leader_id": {
                    "description": "LeaderID identifies the current TC leader node.",
                    "type": "string"
                },
                "term": {
                    "description": "Term is the leader-election term associated with this operation.",
                    "type": "integer"
                }
            }
        },
        "api.TCLeaseAcquireRequest": {
            "type": "object",
            "properties": {
                "candidate_endpoint": {
                    "description": "CandidateEndpoint is the network endpoint for the leadership candidate.",
                    "type": "string"
                },
                "candidate_id": {
                    "description": "CandidateID identifies the node requesting TC leadership.",
                    "type": "string"
                },
                "term": {
                    "description": "Term is the leader-election term associated with this operation.",
                    "type": "integer"
                },
                "ttl_ms": {
                    "description": "TTLMillis is the requested TC lease duration in milliseconds.",
                    "type": "integer"
                }
            }
        },
        "api.TCLeaseAcquireResponse": {
            "type": "object",
            "properties": {
                "expires_at": {
                    "description": "ExpiresAtUnix is the TC lease expiry as a Unix timestamp in seconds when granted.",
                    "type": "integer"
                },
                "granted": {
                    "description": "Granted reports whether the lease acquire request succeeded.",
                    "type": "boolean"
                },
                "leader_endpoint": {
                    "description": "LeaderEndpoint identifies the active leader endpoint to retry against when applicable.",
                    "type": "string"
                },
                "leader_id": {
                    "description": "LeaderID identifies the current TC leader node.",
                    "type": "string"
                },
                "term": {
                    "description": "Term is the leader-election term associated with this operation.",
                    "type": "integer"
                }
            }
        },
        "api.TCLeaseReleaseRequest": {
            "type": "object",
            "properties": {
                "leader_id": {
                    "description": "LeaderID identifies the current TC leader node.",
                    "type": "string"
                },
                "term": {
                    "description": "Term is the leader-election term associated with this operation.",
                    "type": "integer"
                }
            }
        },
        "api.TCLeaseReleaseResponse": {
            "type": "object",
            "properties": {
                "released": {
                    "description": "Released reports whether the lease or TC lock release succeeded.",
                    "type": "boolean"
                }
            }
        },
        "api.TCLeaseRenewRequest": {
            "type": "object",
            "properties": {
                "leader_id": {
                    "description": "LeaderID identifies the current TC leader node.",
                    "type": "string"
                },
                "term": {
                    "description": "Term is the leader-election term associated with this operation.",
                    "type": "integer"
                },
                "ttl_ms": {
                    "description": "TTLMillis is the requested renewal duration in milliseconds.",
                    "type": "integer"
                }
            }
        },
        "api.TCLeaseRenewResponse": {
            "type": "object",
            "properties": {
                "expires_at": {
                    "description": "ExpiresAtUnix is the renewed TC lease expiry as a Unix timestamp in seconds.",
                    "type": "integer"
                },
                "leader_endpoint": {
                    "description": "LeaderEndpoint identifies the active leader endpoint to retry against when applicable.",
                    "type": "string"
                },
                "leader_id": {
                    "description": "LeaderID identifies the current TC leader node.",
                    "type": "string"
                },
                "renewed": {
                    "description": "Renewed reports whether the lease renew request succeeded.",
                    "type": "boolean"
                },
                "term": {
                    "description": "Term is the leader-election term associated with this operation.",
                    "type": "integer"
                }
            }
        },
        "api.TCRMBackend": {
            "type": "object",
            "properties": {
                "backend_hash": {
                    "description": "BackendHash identifies a storage backend island for RM routing.",
                    "type": "string"
                },
                "endpoints": {
                    "description": "Endpoints lists active endpoints known for this cluster or backend.",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "updated_at_unix": {
                    "description": "UpdatedAtUnix is when this backend mapping was last updated, as a Unix timestamp in seconds.",
                    "type": "integer"
                }
            }
        },
        "api.TCRMListResponse": {
            "type": "object",
            "properties": {
                "backends": {
                    "description": "Backends enumerates backend-to-endpoint mappings.",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/api.TCRMBackend"
                    }
                },
                "updated_at_unix": {
                    "description": "UpdatedAtUnix is when the RM backend registry was last updated, as a Unix timestamp in seconds.",
                    "type": "integer"
                }
            }
        },
        "api.TCRMRegisterRequest": {
            "type": "object",
            "properties": {
                "backend_hash": {
                    "description": "BackendHash identifies a storage backend island for RM routing.",
                    "type": "string"
                },
                "endpoint": {
                    "description": "Endpoint is a registered RM or cluster endpoint.",
                    "type": "string"
                }
            }
        },
        "api.TCRMRegisterResponse": {
            "type": "object",
            "properties": {
                "backend_hash": {
                    "description": "BackendHash identifies a storage backend island for RM routing.",
                    "type": "string"
                },
                "endpoints": {
                    "description": "Endpoints lists active endpoints known for this cluster or backend.",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "updated_at_unix": {
                    "description": "UpdatedAtUnix is when the backend registry entry was last updated, as a Unix timestamp in seconds.",
                    "type": "integer"
                }
            }
        },
        "api.TCRMUnregisterRequest": {
            "type": "object",
            "properties": {
                "backend_hash": {
                    "description": "BackendHash identifies a storage backend island for RM routing.",
                    "type": "string"
                },
                "endpoint": {
                    "description": "Endpoint is a registered RM or cluster endpoint.",
                    "type": "string"
                }
            }
        },
        "api.TCRMUnregisterResponse": {
            "type": "object",
            "properties": {
                "backend_hash": {
                    "description": "BackendHash identifies a storage backend island for RM routing.",
                    "type": "string"
                },
                "endpoints": {
                    "description": "Endpoints lists active endpoints known for this cluster or backend.",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "updated_at_unix": {
                    "description": "UpdatedAtUnix is when the backend registry entry was last updated, as a Unix timestamp in seconds.",
                    "type": "integer"
                }
            }
        },
        "api.TxnDecisionRequest": {
            "type": "object",
            "properties": {
                "expires_at_unix": {
                    "description": "ExpiresAtUnix is a Unix timestamp in seconds indicating when the lease or record expires.",
                    "type": "integer"
                },
                "participants": {
                    "description": "Participants enumerates transaction participants that should be tracked for the decision.",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/api.TxnParticipant"
                    }
                },
                "state": {
                    "description": "pending|commit|rollback",
                    "type": "string"
                },
                "target_backend_hash": {
                    "description": "TargetBackendHash scopes RM apply requests to a specific backend island.",
                    "type": "string"
                },
                "tc_term": {
                    "description": "TCTerm is the current TC leader term for this decision.",
                    "type": "integer"
                },
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                }
            }
        },
        "api.TxnDecisionResponse": {
            "type": "object",
            "properties": {
                "state": {
                    "description": "State carries the transaction decision state (for example pending, commit, rollback).",
                    "type": "string"
                },
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                }
            }
        },
        "api.TxnParticipant": {
            "type": "object",
            "properties": {
                "backend_hash": {
                    "description": "BackendHash identifies the storage backend island for this participant.",
                    "type": "string"
                },
                "key": {
                    "description": "Key identifies the lock/state key within the namespace.",
                    "type": "string"
                },
                "namespace": {
                    "description": "Namespace scopes the request or response to a lockd namespace.",
                    "type": "string"
                }
            }
        },
        "api.TxnReplayRequest": {
            "type": "object",
            "properties": {
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                }
            }
        },
        "api.TxnReplayResponse": {
            "type": "object",
            "properties": {
                "state": {
                    "description": "State carries the transaction decision state (for example pending, commit, rollback).",
                    "type": "string"
                },
                "txn_id": {
                    "description": "TxnID associates the operation with a transaction coordinator record.",
                    "type": "string"
                }
            }
        },
        "api.UpdateResponse": {
            "type": "object",
            "properties": {
                "bytes": {
                    "description": "Bytes is the number of state bytes written by the update.",
                    "type": "integer"
                },
                "metadata": {
                    "description": "Metadata carries metadata values returned by the server for this object.",
                    "allOf": [
                        {
                            "$ref": "#/definitions/api.MetadataAttributes"
                        }
                    ]
                },
                "new_state_etag": {
                    "description": "NewStateETag is the updated state entity tag after a successful mutation.",
                    "type": "string"
                },
                "new_version": {
                    "description": "NewVersion is the updated monotonic version after a successful mutation.",
                    "type": "integer"
                }
            }
        },
        "httpapi.metadataMutation": {
            "type": "object",
            "properties": {
                "query_hidden": {
                    "type": "boolean"
                }
            }
        }
    },
    "securityDefinitions": {
        "mTLS": {
            "description": "Mutual TLS is required in production deployments; place holder header documents client certificate identity propagation.",
            "type": "apiKey",
            "name": "X-Client-Cert",
            "in": "header"
        }
    },
    "tags": [
        {
            "description": "Lease acquisition, keepalive, release, and state management.",
            "name": "lease"
        },
        {
            "description": "Queue enqueue, dequeue, acknowledgement, and lifecycle operations.",
            "name": "queue"
        },
        {
            "description": "Service health and readiness probes.",
            "name": "system"
        }
    ]
}